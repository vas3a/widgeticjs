!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){!function(a,d){"function"==typeof define&&define.amd?define(d):"object"==typeof c?b.exports=d():a.ayepromise=d()}(this,function(){"use strict";var a={},b=function(){var a=!1;return function(b){return function(){a||(a=!0,b.apply(null,arguments))}}},c=function(a){var b=a&&a.then;return null!==a&&"object"==typeof a&&"function"==typeof b?function(){return b.apply(a,arguments)}:void 0},d=function(b,c){var d=a.defer(),e=function(a,b){setTimeout(function(){var c;try{c=a(b)}catch(e){return void d.reject(e)}c===d.promise?d.reject(new TypeError("Cannot resolve promise with itself")):d.resolve(c)},1)};return{promise:d.promise,callFulfilled:function(a){b&&b.call?e(b,a):d.resolve(a)},callRejected:function(a){c&&c.call?e(c,a):d.reject(a)}}},e=0,f=1,g=2;return a.defer=function(){var a,h=e,i=[],j=function(b){h=f,a=b,i.forEach(function(b){b.callFulfilled(a)})},k=function(b){h=g,a=b,i.forEach(function(b){b.callRejected(a)})},l=function(b){h===f?b.callFulfilled(a):h===g&&b.callRejected(a)},m=function(a,b){var c=d(a,b);return i.push(c),l(c),c.promise},n=function(a){var c=b();try{a(c(o),c(k))}catch(d){c(k)(d)}},o=function(a){var b;try{b=c(a)}catch(d){return void k(d)}b?n(b):j(a)},p=b();return{resolve:p(o),reject:p(k),promise:{then:m,fail:function(a){return m(null,a)}}}},a})},{}],2:[function(a,b){!function(a){"use strict";function c(){var b={},c=Function;return{publish:function(){var c,d,e,f=arguments,g=b[f[0]];g&&(c=g.length,d=f.length>1?Array.prototype.splice.call(f,1):[],setTimeout(function(){for(e=0;c>e;e+=1)g[e].apply(a,d);g=a=d=null},0))},subscribe:function(a,d){if("string"!=typeof a)throw"invalid or missing channel";if(!(d instanceof c))throw"invalid or missing callback";return b[a]||(b[a]=[]),b[a].push(d),{channel:a,callback:d}},unsubscribe:function(a,d){if(a.channel&&a.callback&&(d=a.callback,a=a.channel),"string"!=typeof a)throw"invalid or missing channel";if(!(d instanceof c))throw"invalid or missing callback";var e,f=b[a],g=f instanceof Array?f.length:0;for(e=0;g>e;e+=1)if(f[e]===d){f.splice(e,1);break}}}}"function"==typeof define&&define.amd?define("pubsub",c):"object"==typeof b&&b.exports?b.exports=c():a.PubSub=c()}(this)},{}],3:[function(a,b){!function(){function a(a){function b(){for(;h=k<j.length&&a>l;){var b=k++,c=j[b],f=d.call(c,1);f.push(e(b)),++l,c[0].apply(null,f)}}function e(a){return function(c,d){--l,null==n&&(null!=c?(n=c,k=m=0/0,f()):(j[a]=d,--m?h||b():f()))}}function f(){null!=n?o(n):i?o(n,j):o.apply(null,[n].concat(j))}var g,h,i,j=[],k=0,l=0,m=0,n=null,o=c;return a||(a=1/0),g={defer:function(){return n||(j.push(arguments),++m,b()),g},await:function(a){return o=a,i=!1,m||f(),g},awaitAll:function(a){return o=a,i=!0,m||f(),g}}}function c(){}var d=[].slice;a.version="1.0.7","function"==typeof define&&define.amd?define(function(){return a}):"object"==typeof b&&b.exports?b.exports=a:this.queue=a}()},{}],4:[function(a,b,c){!function(a,d){"object"==typeof c?b.exports=d():"function"==typeof define&&define.amd?define("uxhr",d):a.uxhr=d()}(this,function(){"use strict";return function(a,b,c){b=b||"",c=c||{};var d=c.complete||function(){},e=c.success||function(){},f=c.error||function(){},g=c.headers||{},h=c.method||"GET",i=c.sync||!1,j=function(){return 0===a.indexOf("http")&&"undefined"!=typeof XDomainRequest?new XDomainRequest:new XMLHttpRequest}();if(!j)throw new Error("Browser doesn't support XHR");if("string"!=typeof b){var k=[];for(var l in b)k.push(l+"="+b[l]);b=k.join("&")}"ontimeout"in j&&(j.ontimeout=+c.timeout||0),j.onload=function(){d(j.responseText,j.status),e(j.responseText)},j.onerror=function(){d(j.responseText),f(j.responseText,j.status)},j.open(h,"GET"===h&&b?a+"?"+b:a,!i);for(var m in g)j.setRequestHeader(m,g[m]);return j.send("GET"!==h?b:null),j}})},{}],5:[function(a,b,c){!function(a){function b(a){if(b[a]!==f)return b[a];var c;if("bug-string-char-index"==a)c="a"!="a"[0];else if("json"==a)c=b("json-stringify")&&b("json-parse");else{var d,e='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==a){var h=j.stringify,i="function"==typeof h&&k;if(i){(d=function(){return 1}).toJSON=d;try{i="0"===h(0)&&"0"===h(new Number)&&'""'==h(new String)&&h(g)===f&&h(f)===f&&h()===f&&"1"===h(d)&&"[1]"==h([d])&&"[null]"==h([f])&&"null"==h(null)&&"[null,null,null]"==h([f,g,null])&&h({a:[d,!0,!1,null,"\x00\b\n\f\r	"]})==e&&"1"===h(null,d)&&"[\n 1,\n 2\n]"==h([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==h(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==h(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==h(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==h(new Date(-1))}catch(l){i=!1}}c=i}if("json-parse"==a){var m=j.parse;if("function"==typeof m)try{if(0===m("0")&&!m(!1)){d=m(e);var n=5==d.a.length&&1===d.a[0];if(n){try{n=!m('"	"')}catch(l){}if(n)try{n=1!==m("01")}catch(l){}if(n)try{n=1!==m("1.")}catch(l){}}}}catch(l){n=!1}c=n}}return b[a]=!!c}var d,e,f,g={}.toString,h="function"==typeof define&&define.amd,i="object"==typeof JSON&&JSON,j="object"==typeof c&&c&&!c.nodeType&&c;j&&i?(j.stringify=i.stringify,j.parse=i.parse):j=a.JSON=i||{};var k=new Date(-0xc782b5b800cec);try{k=-109252==k.getUTCFullYear()&&0===k.getUTCMonth()&&1===k.getUTCDate()&&10==k.getUTCHours()&&37==k.getUTCMinutes()&&6==k.getUTCSeconds()&&708==k.getUTCMilliseconds()}catch(l){}if(!b("json")){var m="[object Function]",n="[object Date]",o="[object Number]",p="[object String]",q="[object Array]",r="[object Boolean]",s=b("bug-string-char-index");if(!k)var t=Math.floor,u=[0,31,59,90,120,151,181,212,243,273,304,334],v=function(a,b){return u[b]+365*(a-1970)+t((a-1969+(b=+(b>1)))/4)-t((a-1901+b)/100)+t((a-1601+b)/400)};(d={}.hasOwnProperty)||(d=function(a){var b,c={};return(c.__proto__=null,c.__proto__={toString:1},c).toString!=g?d=function(a){var b=this.__proto__,c=a in(this.__proto__=null,this);return this.__proto__=b,c}:(b=c.constructor,d=function(a){var c=(this.constructor||b).prototype;return a in this&&!(a in c&&this[a]===c[a])}),c=null,d.call(this,a)});var w={"boolean":1,number:1,string:1,undefined:1},x=function(a,b){var c=typeof a[b];return"object"==c?!!a[b]:!w[c]};if(e=function(a,b){var c,f,h,i=0;(c=function(){this.valueOf=0}).prototype.valueOf=0,f=new c;for(h in f)d.call(f,h)&&i++;return c=f=null,i?e=2==i?function(a,b){var c,e={},f=g.call(a)==m;for(c in a)f&&"prototype"==c||d.call(e,c)||!(e[c]=1)||!d.call(a,c)||b(c)}:function(a,b){var c,e,f=g.call(a)==m;for(c in a)f&&"prototype"==c||!d.call(a,c)||(e="constructor"===c)||b(c);(e||d.call(a,c="constructor"))&&b(c)}:(f=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],e=function(a,b){var c,e,h=g.call(a)==m,i=!h&&"function"!=typeof a.constructor&&x(a,"hasOwnProperty")?a.hasOwnProperty:d;for(c in a)h&&"prototype"==c||!i.call(a,c)||b(c);for(e=f.length;c=f[--e];i.call(a,c)&&b(c));}),e(a,b)},!b("json-stringify")){var y={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},z="000000",A=function(a,b){return(z+(b||0)).slice(-a)},B="\\u00",C=function(a){var b,c='"',d=0,e=a.length,f=e>10&&s;for(f&&(b=a.split(""));e>d;d++){var g=a.charCodeAt(d);switch(g){case 8:case 9:case 10:case 12:case 13:case 34:case 92:c+=y[g];break;default:if(32>g){c+=B+A(2,g.toString(16));break}c+=f?b[d]:s?a.charAt(d):a[d]}}return c+'"'},D=function(a,b,c,h,i,j,k){var l,m,s,u,w,x,y,z,B,E,F,G,H,I,J,K;try{l=b[a]}catch(L){}if("object"==typeof l&&l)if(m=g.call(l),m!=n||d.call(l,"toJSON"))"function"==typeof l.toJSON&&(m!=o&&m!=p&&m!=q||d.call(l,"toJSON"))&&(l=l.toJSON(a));else if(l>-1/0&&1/0>l){if(v){for(w=t(l/864e5),s=t(w/365.2425)+1970-1;v(s+1,0)<=w;s++);for(u=t((w-v(s,0))/30.42);v(s,u+1)<=w;u++);w=1+w-v(s,u),x=(l%864e5+864e5)%864e5,y=t(x/36e5)%24,z=t(x/6e4)%60,B=t(x/1e3)%60,E=x%1e3}else s=l.getUTCFullYear(),u=l.getUTCMonth(),w=l.getUTCDate(),y=l.getUTCHours(),z=l.getUTCMinutes(),B=l.getUTCSeconds(),E=l.getUTCMilliseconds();l=(0>=s||s>=1e4?(0>s?"-":"+")+A(6,0>s?-s:s):A(4,s))+"-"+A(2,u+1)+"-"+A(2,w)+"T"+A(2,y)+":"+A(2,z)+":"+A(2,B)+"."+A(3,E)+"Z"}else l=null;if(c&&(l=c.call(b,a,l)),null===l)return"null";if(m=g.call(l),m==r)return""+l;if(m==o)return l>-1/0&&1/0>l?""+l:"null";if(m==p)return C(""+l);if("object"==typeof l){for(I=k.length;I--;)if(k[I]===l)throw TypeError();if(k.push(l),F=[],J=j,j+=i,m==q){for(H=0,I=l.length;I>H;H++)G=D(H,l,c,h,i,j,k),F.push(G===f?"null":G);K=F.length?i?"[\n"+j+F.join(",\n"+j)+"\n"+J+"]":"["+F.join(",")+"]":"[]"}else e(h||l,function(a){var b=D(a,l,c,h,i,j,k);b!==f&&F.push(C(a)+":"+(i?" ":"")+b)}),K=F.length?i?"{\n"+j+F.join(",\n"+j)+"\n"+J+"}":"{"+F.join(",")+"}":"{}";return k.pop(),K}};j.stringify=function(a,b,c){var d,e,f,h;if("function"==typeof b||"object"==typeof b&&b)if((h=g.call(b))==m)e=b;else if(h==q){f={};for(var i,j=0,k=b.length;k>j;i=b[j++],h=g.call(i),(h==p||h==o)&&(f[i]=1));}if(c)if((h=g.call(c))==o){if((c-=c%1)>0)for(d="",c>10&&(c=10);d.length<c;d+=" ");}else h==p&&(d=c.length<=10?c:c.slice(0,10));return D("",(i={},i[""]=a,i),e,f,d,"",[])}}if(!b("json-parse")){var E,F,G=String.fromCharCode,H={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},I=function(){throw E=F=null,SyntaxError()},J=function(){for(var a,b,c,d,e,f=F,g=f.length;g>E;)switch(e=f.charCodeAt(E)){case 9:case 10:case 13:case 32:E++;break;case 123:case 125:case 91:case 93:case 58:case 44:return a=s?f.charAt(E):f[E],E++,a;case 34:for(a="@",E++;g>E;)if(e=f.charCodeAt(E),32>e)I();else if(92==e)switch(e=f.charCodeAt(++E)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:a+=H[e],E++;break;case 117:for(b=++E,c=E+4;c>E;E++)e=f.charCodeAt(E),e>=48&&57>=e||e>=97&&102>=e||e>=65&&70>=e||I();a+=G("0x"+f.slice(b,E));break;default:I()}else{if(34==e)break;for(e=f.charCodeAt(E),b=E;e>=32&&92!=e&&34!=e;)e=f.charCodeAt(++E);a+=f.slice(b,E)}if(34==f.charCodeAt(E))return E++,a;I();default:if(b=E,45==e&&(d=!0,e=f.charCodeAt(++E)),e>=48&&57>=e){for(48==e&&(e=f.charCodeAt(E+1),e>=48&&57>=e)&&I(),d=!1;g>E&&(e=f.charCodeAt(E),e>=48&&57>=e);E++);if(46==f.charCodeAt(E)){for(c=++E;g>c&&(e=f.charCodeAt(c),e>=48&&57>=e);c++);c==E&&I(),E=c}if(e=f.charCodeAt(E),101==e||69==e){for(e=f.charCodeAt(++E),(43==e||45==e)&&E++,c=E;g>c&&(e=f.charCodeAt(c),e>=48&&57>=e);c++);c==E&&I(),E=c}return+f.slice(b,E)}if(d&&I(),"true"==f.slice(E,E+4))return E+=4,!0;if("false"==f.slice(E,E+5))return E+=5,!1;if("null"==f.slice(E,E+4))return E+=4,null;I()}return"$"},K=function(a){var b,c;if("$"==a&&I(),"string"==typeof a){if("@"==(s?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];a=J(),"]"!=a;c||(c=!0))c&&(","==a?(a=J(),"]"==a&&I()):I()),","==a&&I(),b.push(K(a));return b}if("{"==a){for(b={};a=J(),"}"!=a;c||(c=!0))c&&(","==a?(a=J(),"}"==a&&I()):I()),(","==a||"string"!=typeof a||"@"!=(s?a.charAt(0):a[0])||":"!=J())&&I(),b[a.slice(1)]=K(J());return b}I()}return a},L=function(a,b,c){var d=M(a,b,c);d===f?delete a[b]:a[b]=d},M=function(a,b,c){var d,f=a[b];if("object"==typeof f&&f)if(g.call(f)==q)for(d=f.length;d--;)L(f,d,c);else e(f,function(a){L(f,a,c)});return c.call(a,b,f)};j.parse=function(a,b){var c,d;return E=0,F=""+a,c=K(J()),"$"!=J()&&I(),E=F=null,b&&g.call(b)==m?M((d={},d[""]=c,d),"",b):c}}}h&&define(function(){return j})}(this)},{}],"UI/composition/index":[function(a,b){b.exports=a("vLZnBx")},{}],vLZnBx:[function(a,b){var c,d,e,f,g,h,i,j,k,l,m;g=a("config"),h=a("utils/guid"),l=a("./../../../../bower/queue-async/queue.js"),d=a("../../api"),e=a("../../auth"),f={},c=function(a,b,c){var i,j,k,m,n=this;if(this._queue=l(1),this._queue.defer(function(a){return n._startQueue=a}),"string"==typeof b?m=g.composition.replace("{id}",b):"object"==typeof b&&(m=g.widget.replace("{id}",b.widget_id),b.skin&&this.setSkin(b.skin),b.content&&this.setContent(b.content)),j=[],c||(c=b.brand_pos),c&&j.push("bp="+c),i=e.getClientId(),null!=b.widget_id&&!i)throw new Error("Blogvio should be initialized before using the UI.Composition!");return(k=d.accessToken())&&j.push("access_token="+k),i&&j.push("client_id="+i),j.length&&(m+="?"+j.join("&")),this.id=h(),f[this.id]=this,this._iframe=document.createElement("iframe"),this._iframe.setAttribute("class","blogvio-composition"),this._iframe.setAttribute("name",this.id),a.appendChild(this._iframe),this._iframe.setAttribute("src",m),this},c.prototype.queue=function(a){return this._queue.defer(function(b){return a(),b()})},c.prototype._ready=function(){return this._startQueue()},c.prototype._sendMessage=function(a){var b=this;return this._queue.defer(function(c){return b._iframe.contentWindow.postMessage(JSON.stringify(a),"*"),c()}),this},k={clearContent:"cx",setContent:"sc",addContent:"ac",changeContent:"cc",removeContent:"rc",setSkin:"ss",changeSkin:"cs"},m=function(a,b){return c.prototype[a]=function(a){return this._sendMessage({t:b,d:a})}};for(j in k)i=k[j],m(j,i);c.connect=function(a){return f[a.d]._ready()},b.exports=c},{"../../api":"1cWdrt","../../auth":"1/F0DJ","./../../../../bower/queue-async/queue.js":3,config:"w4N2lO","utils/guid":"wdlc5X"}],"4teAgo":[function(a,b){var c,d,e,f,g,h,i,j=[].slice;e=a("config"),i=a("./../../../../bower/queue-async/queue.js"),h=a("./../../../../bower/pubsub.js/src/pubsub.js"),g=a("utils/guid"),d=a("../../api"),f={},c=function(a,b,c){var d=this;return this.composition=b,this._queue=i(1),this._queue.defer(function(a){return d._startQueue=a}),h.subscribe("api/token/update",this._updateToken.bind(this)),this._updateToken(),c&&this.setEditorOptions(c),this.composition.queue(function(){return d.composition._iframe.contentWindow.waitEditorInit=!0}),this.composition.queue(this._compReady.bind(this)),f[this.composition.id]=this,this._iframe=document.createElement("iframe"),this._iframe.setAttribute("class","blogvio-editor"),this._iframe.setAttribute("name",g()),a.appendChild(this._iframe),this._iframe.setAttribute("src",e.editor+"#"+this.composition.id),this},c.prototype.close=function(){return f[this.composition.id]=null,this._iframe.parentNode.removeChild(this._iframe),this},c.prototype.goTo=function(a){return this._sendMessage({t:"step",d:a}),this},c.prototype.setEditorOptions=function(a){return this._sendMessage({t:"opts",d:a}),this},c.prototype.save=function(){return this.goTo("done"),this},c.prototype.on=function(a,b){var c,d,e,f,g;for(d=a.split(" "),c=this.hasOwnProperty("_callbacks")&&this._callbacks||(this._callbacks={}),f=0,g=d.length;g>f;f++)e=d[f],c[e]||(c[e]=[]),c[e].push(b);return this},c.prototype.off=function(a,b){var c,d,e,f,g,h,i,j,k,l;if(0===arguments.length)return this._callbacks={},this;if(!a)return this;for(d=a.split(" "),h=0,j=d.length;j>h;h++)if(g=d[h],f=null!=(l=this._callbacks)?l[g]:void 0)if(b){for(e=i=0,k=f.length;k>i;e=++i)if(c=f[e],c===b){f=f.slice(),f.splice(e,1),this._callbacks[g]=f;break}}else delete this._callbacks[g];return this},c.prototype._trigger=function(){var a,b,c,d,e,f,g;if(a=1<=arguments.length?j.call(arguments,0):[],c=a.shift(),d=this.hasOwnProperty("_callbacks")&&(null!=(g=this._callbacks)?g[c]:void 0)){for(e=0,f=d.length;f>e&&(b=d[e],b.apply(this,a)!==!1);e++);return!0}},c.prototype._sendMessage=function(a){var b=this;return this._queue.defer(function(c){return b._iframe.contentWindow.postMessage(JSON.stringify(a),"*"),c()})},c.prototype._ready=function(){return this._startQueue()},c.prototype._compReady=function(){return this._sendMessage({t:"ready"})},c.prototype._updateToken=function(){return this._sendMessage({t:"token",d:d.accessToken()})},c.connect=function(a){return f[a.id]._ready()},c.event=function(a){return f[a.id]._trigger(a.e,a.d)},b.exports=c},{"../../api":"1cWdrt","./../../../../bower/pubsub.js/src/pubsub.js":2,"./../../../../bower/queue-async/queue.js":3,config:"w4N2lO","utils/guid":"wdlc5X"}],"UI/editor/index":[function(a,b){b.exports=a("4teAgo")},{}],"UI/index":[function(a,b){b.exports=a("wkkzaU")},{}],wkkzaU:[function(a,b){var c,d,e,f,g,h;c=a("./composition"),d=a("./editor"),h=a("./popup"),g=a("./parse"),e=function(){return function(a,b,c){c.prototype=a.prototype;var d=new c,e=a.apply(d,b);return Object(e)===e?e:d}(c,arguments,function(){})},f=function(){return function(a,b,c){c.prototype=a.prototype;var d=new c,e=a.apply(d,b);return Object(e)===e?e:d}(d,arguments,function(){})},b.exports={composition:e,editor:f,parse:g,popup:h}},{"./composition":"vLZnBx","./editor":"4teAgo","./parse":"ga8u34","./popup":"2x7f1H"}],"UI/parse":[function(a,b){b.exports=a("ga8u34")},{}],ga8u34:[function(a,b){var c,d,e,f,g,h,i,j;j=a("../utils/ready"),c="allow-scale-down",g=function(a){var b,c,d;return b=a.children[0],d=a.parentNode,a.removeChild(b),c=document.createDocumentFragment(),c.insertBefore(b,null),d.insertBefore(c,a),d.removeChild(a),b},e=function(a){return a.children[0]},h=function(a,b){return'<div class="wdgtc-wrap" data-wdgtc-id="'+a+'" style="width:100%;'+(b.wrapStyle||"")+'">		<div class="wdgtc-holder" style="position:relative; padding: 0;'+(b.holdStyle||"")+'">		</div>	</div>'},i={fixed:function(a,b){var c;return c=100*b/a,{wrapStyle:"max-width: "+a+"px; min-width: "+a+"px;",holdStyle:"padding-top: "+c+"%;"}},"allow-scale-down":function(a,b){var c;return c=100*b/a,{wrapStyle:"max-width: "+a+"px;",holdStyle:"padding-top: "+c+"%;"}},"fixed-height":function(a,b){return{holdStyle:"height: "+b+"px; padding-top: 0;"}},fill:function(a,b){var c;return c=100*b/a,{holdStyle:"padding-top: "+c+"%;"}}},f=function(){return j(function(){var a,b,c,e;for(a=document.querySelectorAll(".widgetic-composition"),c=0,e=a.length;e>c;c++)b=a[c],d(b)})},d=function(a){var b,d,f,j;return f={id:a.getAttribute("data-id"),width:a.getAttribute("data-width")||300,height:a.getAttribute("data-height")||300,resize:a.getAttribute("data-resize")||c,brand_pos:a.getAttribute("data-brand")||"bottom-right"},f.id?(i[f.resize]||(f.resize=c),j=i[f.resize](f.width,f.height),a.insertAdjacentHTML("afterbegin",h(f.id,j)),a=g(a),d=e(a),b=new Blogvio.UI.composition(d,f.id,f.brand_pos),b._iframe.setAttribute("style","position:absolute;top:0;left:0;width:100%; height:100%;")):void 0},b.exports=f},{"../utils/ready":"z441ZI"}],"2x7f1H":[function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=function(a,b){return function(){return a.apply(b,arguments)}};e=a("./../../../../bower/aye/ayepromise.js"),m=a("utils/guid"),n=a("json3"),i=a("utils/event"),f=a("config"),j=function(a){var b,c,d,e;for(null==a&&(a={}),d=0,e=arguments.length;e>d;d++)if(b=arguments[d])for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},g=function(a,b){var c;return null==b&&(b=10),c=null,function(){return clearTimeout(c),c=setTimeout(a,b)}},l=function(a){var b;return b=a.getBoundingClientRect(),{top:b.top+document.body.scrollTop,left:b.left+document.body.scrollLeft}},o=function(a,b,c){var d;return d=this.document.createElement("link"),d.setAttribute("rel","stylesheet"),d.setAttribute("type","text/css"),d.setAttribute("charset","utf-8"),d.setAttribute("href",a),c&&i.on(d,"load",c),b.appendChild(d)},h={},p=function(a){var b,c,d,f;return c=m(),f=(h[c]=b=e.defer()).promise,d={id:c,t:"p",d:a},{promise:f,message:d}},d=function(a,b){return h[a.id].resolve(b)},r=function(a,b){return null==b&&(b=window.parent),"string"==typeof b&&(b=window.frames[b]),b.postMessage(JSON.stringify(a),"*")},q=function(a,b,c){return a.d.original=a.d.event,a.d.event="done",a.d.response=c,r(a,b.source)},s=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},k=function(a,b){var c;return a&&(c=window.getComputedStyle(a).getPropertyCSSValue(b))?(c=c.cssText,"none"===c?void 0:c):void 0},c=function(){function a(a){this._prepare=t(this._prepare,this),this.position=t(this.position,this),this.resize=t(this.resize,this);var b,c,d;this.options=a,d=this.options;for(b in d)c=d[b],this[b]=c;this.dimensions={width:0,height:0},this.visible=!1,this.styles={}}return a.popups={},a.callbacks={},a.iframes={},a["new"]=function(b){var c;return null==b&&(b={}),c=b.name||m(),b.name=c,this.popups[c]=new a(b),this.popups[c].init()},a.receiver=function(b,c){var d;return d=b.d.event,d="on"+s(d),"function"==typeof a[d]?a[d](b,c):void 0},a.onCreate=function(a,b){var c,d,e=this;return d=a.d.name,c=document.createElement("iframe"),c.setAttribute("class","wdgtc-popup"),c.setAttribute("name",d),c.setAttribute("style","border: 0; width: 0; height: 0; position: absolute; top: 0; left: -10000px; z-index: 2147483647;"),c.isVisible=!1,document.querySelectorAll("body")[0].appendChild(c),c.setAttribute("src",f.popup+"&name="+encodeURIComponent(d)+"&event=ready"),this.iframes[d]=c,c.doPosition=g(this.doPosition.bind(this,c,null),0),i.on(window,"resize",c.doPosition),i.on(window,"scroll",c.doPosition),this.callbacks[d]=function(){return delete e.callbacks[d],q(a,b)}},a.onReady=function(a){var b,c;return"function"==typeof(b=this.callbacks)[c=a.d.name]?b[c]():void 0},a.onDone=function(a,b){var c;return c=a.d.original,c="on"+s(c)+"Done",this[c]?this[c](a,b):d(a,a.d.response)},a.onCreateDone=function(a,b){return d(a,b.source.frames[a.d.name])},a.onManage=function(a,b){var c,d,e,f;return e=a.d.name,c=this.iframes[e],d="do"+s(a.d["do"]),f="function"==typeof this[d]?this[d](c,a.d):void 0,q(a,b,f)},a.doResize=function(a,b){return a.style.width=b.dimensions.width+"px",a.style.height=b.dimensions.height+"px",b.dimensions.shadow&&(a.style.boxShadow=b.dimensions.shadow),b.dimensions.borderRadius&&(a.style.borderRadius=b.dimensions.borderRadius),b.dimensions},a.doHide=function(a){a.isVisible=!1,a.style.display="none"},a.doShow=function(a){a.isVisible=!0,a.style.display="block"},a.doPosition=function(a,b){var c,d,e,f,g,h,i;if(b)a.positionOptions=b;else{if(!a.positionOptions)return;if(!a.isVisible)return;b=a.positionOptions}f=b.offset,g=b.dimensions,c=j({},b.anchor),d=document.querySelector('iframe[name="'+c.parent+'"]'),d&&(i=l(d),h=i.top,e=i.left,c.top+=h,c.left+=e),e=window.innerWidth+document.body.scrollLeft-(c.left+g.width+f.rightMargin+f.leftOffset),e=c.left+f.leftOffset+Math.min(0,e),e=Math.max(e,c.left+c.width-g.width),h=window.innerHeight+document.body.scrollTop-(c.top+c.height+g.height+f.bottomMargin),h=h>=0?c.top+c.height+f.topOffset:c.top-g.height-f.bottomMargin,0>h&&(h=c.top+c.height+f.topOffset),a.style.top=h+"px",a.style.left=e+"px"},a.doRelease=function(a,b){var c;a.parentNode.removeChild(a),i.off(window,"resize",a.doPosition),i.off(window,"scroll",a.doPosition),c=b.name,delete this.iframes[c]},a.prototype.topOffset=0,a.prototype.leftOffset=0,a.prototype.rightMargin=15,a.prototype.bottomMargin=15,a.prototype.copyStyles=!0,a.prototype.init=function(){var a;return a=this._sendEvent("create"),a.then(this._prepare)},a.prototype.append=function(a){return a.jquery&&(a=a[0]),this.body.innerHTML="",this.body.appendChild(a),this.styles={},this._updateCachedStyles(a),this.resize()},a.prototype.resize=function(){return this.dimensions={width:this.body.offsetWidth,height:this.body.offsetHeight,shadow:this.styles["box-shadow"],borderRadius:this.styles["border-radius"]},this._sendEvent("manage",{"do":"resize",dimensions:this.dimensions})},a.prototype.hide=function(){var a=this;return this._sendEvent("manage",{"do":"hide"}).then(function(){return a.visible=!1})},a.prototype.show=function(){var a=this;return this.position().then(function(){return a._sendEvent("manage",{"do":"show"}).then(function(){return a.visible=!0})})},a.prototype.position=function(){var a,b;return b={topOffset:this.topOffset,leftOffset:this.leftOffset,bottomMargin:this.bottomMargin,rightMargin:this.rightMargin},a={top:0,left:0,width:0,height:0},this.anchor.jquery&&(a=this.anchor.offset(),a.width=parseInt(this.anchor.outerWidth(),10),a.height=parseInt(this.anchor.outerHeight(),10),a.parent=window.name),this._sendEvent("manage",{"do":"position",anchor:a,dimensions:this.dimensions,offset:b})},a.prototype.release=function(){var a,b,c=this;return a=e.defer(),b=a.promise,this.document.location.reload(),setTimeout(a.resolve,1e3),b.then(function(){return c._sendEvent("manage",{"do":"release"})})},a.prototype._sendEvent=function(a,b){var c,d,e,f;return c={name:this.name,event:a},c=j(c,b),f=p(c),e=f.promise,d=f.message,r(d),e},a.prototype._prepare=function(a){var b,c,d,e,f,g,h=this;if(this.window=a,this.document=this.window.document,this.body=this.document.getElementsByTagName("body")[0],this.head=this.document.getElementsByTagName("head")[0],d='<style type="text/css">body{display:inline-block;margin:0;width:auto !important;height:auto !important;overflow:hidden;background:transparent !important}</style>',this.head.insertAdjacentHTML("beforeend",d),b=function(){return h.body.children[0]&&h._updateCachedStyles(h.body.children[0]),h.resize()},this.css)for(g=this.css,e=0,f=g.length;f>e;e++)c=g[e],o(c,this.head,b);return this},a.prototype._updateCachedStyles=function(a){return this.copyStyles?(this._cacheStyle(a,"box-shadow"),this._cacheStyle(a,"border-radius")):void 0},a.prototype._cacheStyle=function(a,b){return this.styles[b]=k(a,b)},a}.call(this),b.exports=c},{"./../../../../bower/aye/ayepromise.js":1,config:"w4N2lO",json3:5,"utils/event":"1DYCdS","utils/guid":"wdlc5X"}],"UI/popup/index":[function(a,b){b.exports=a("2x7f1H")},{}],"api/index":[function(a,b){b.exports=a("1cWdrt")},{}],"1cWdrt":[function(a,b){var c,d,e,f,g,h,i,j,k,l,m;e=a("../config"),m=a("./request"),l=a("../utils/queue"),g=a("../utils/guid"),d=a("./../../../bower/aye/ayepromise.js"),h=a("json3"),k=a("./../../../bower/pubsub.js/src/pubsub.js"),f={},i={},j=function(a,b,c,d){var f,g;return a=e.api+a,f=(null!=(g=i.tokens)?g.access_token:void 0)||!1,(b||(b="GET"))instanceof Object&&(c=b,b="GET"),"GET"!==b?a+=f?"?access_token="+f:"":(c||(c={}),f&&(c.access_token=f)),h.stringify({t:"a",id:d,a:{u:a,m:b,d:c}})},c=function(a,b,c){var e,h,k,m=this;return h=g(),k=(f[h]=e=d.defer()).promise,l.defer(function(d){var g,l;return l=j.apply(m,e.margs=[a,b,c,h]),k.then(g=function(){return f[h]=null||d()},g),i.proxy(l)}),k},c.response=function(b){var c,d,e,g,k;if(e=f[b.id],c=b.a,d=c.d,""!==d)try{d=h.parse(d)}catch(l){return void e.reject("JSON Parse error!")}return"t"===c.t?e.resolve(d):!d.error||"invalid_grant"!==(k=d.error)&&"access_denied"!==k?e.reject(d):(g=function(){return i.proxy(j.apply(this,e.margs))},a("../auth/index")(!1).then(g,function(){return e.reject("Unable to login again!")}))},c.setProxy=function(a){return i.proxy=a},c.setTokens=function(a){return i.tokens=a,k.publish("api/token/update")},c.getStatus=function(){var a;return(null!=(a=i.tokens)?a.access_token:void 0)?{status:"connected",accessToken:i.tokens.access_token,expiresIn:i.tokens.expires_in,scope:i.tokens.scope}:{status:"disconnected"}},c.accessToken=function(a){var b;return a&&c.setTokens({access_token:a,expires_in:void 0,scope:void 0}),null!=(b=i.tokens)?b.access_token:void 0},c.disconnect=function(){return k.publish("api/token/update"),i.tokens=null},c.queue=l,c.request=m,b.exports=c},{"../auth/index":"1/F0DJ","../config":"w4N2lO","../utils/guid":"wdlc5X","../utils/queue":"gHVNd/","./../../../bower/aye/ayepromise.js":1,"./../../../bower/pubsub.js/src/pubsub.js":2,"./request":"b8bCtv",json3:5}],b8bCtv:[function(a,b){var c,d,e;e=a("./../../../bower/uxhr/uxhr.js"),c=a("json3"),d=function(a){var b,d,f,g,h,i,j,k;if(a.id&&(b=a.a))return k=b.u,i=b.m,f=b.d,h={id:a.id,t:"e",a:{}},g={"Content-type":"application/json"},("PUT"===(i=i.toUpperCase())||"DELETE"===i)&&(g["X-HTTP-Method-Override"]=i,i="POST"),d=function(a,b){return h.a.t=200===b||201===b||202===b||204===b?"t":"f",h.a.d=a,h=c.stringify(h),window.parent.postMessage(h,"*")},j={method:i,headers:g,complete:d},e(k,f,j)},b.exports=d},{"./../../../bower/uxhr/uxhr.js":4,json3:5}],"api/request":[function(a,b){b.exports=a("b8bCtv")},{}],"auth/iframe":[function(a,b){b.exports=a("kUaSlt")},{}],kUaSlt:[function(a,b){var c,d,e,f;c=a("./../../../bower/aye/ayepromise.js"),f=window,e={},d=function(a,b){var c,f,g,h,i;return h=b.promise,d=document.createElement("iframe"),g=e.root.el,g.appendChild(d),f=function(){return b.reject("Timeout error")},c=function(){return g.removeChild(d),clearTimout(i)},i=setTimeout(f,1e4),h.then(c,c),d.setAttribute("src",a),h},d.setRoot=function(a){return e.root=a},b.exports=d},{"./../../../bower/aye/ayepromise.js":1}],"auth/index":[function(a,b){b.exports=a("1/F0DJ")},{}],"1/F0DJ":[function(a,b){var c,d,e,f,g,h,i,j,k,l;g=a("../config"),c=a("../api"),k=a("./popup"),h=a("./iframe"),f=a("./../../../bower/aye/ayepromise.js"),d={},j={},i=[],l=function(a){return null==a&&(a=[]),""+g.auth+"?client_id="+d.id+"&redirect_uri="+d.uri+"&response_type=token&scope="+a.join(" ")+"#oauth"},e=function(a,b){var c,e;if(null==a&&(a=!0),!d.id||!d.uri)throw new Error("Blogvio must be initialized with client id and redirect uri!");return c=f.defer(),e=a?k:h,b&&(i=b),b=i,j.deffered=c,e(l(b),c)},e.setAuthOptions=function(a,b){return d.id=a,d.uri=b},e.getClientId=function(){return d.id},e.connect=function(a){var b;return b=a.d,b&&b.access_token?(c.setTokens(b),j.deffered.resolve(c.getStatus())):j.deffered.reject(c.getStatus())},b.exports=e},{"../api":"1cWdrt","../config":"w4N2lO","./../../../bower/aye/ayepromise.js":1,"./iframe":"kUaSlt","./popup":"wQi8A4"}],"auth/popup":[function(a,b){b.exports=a("wQi8A4")},{}],wQi8A4:[function(a,b){var c,d,e,f,g,h;c=a("./../../../bower/aye/ayepromise.js"),d=a("../utils/guid"),h=window,e={},f=function(a,b){var c,d;return c=(screen.width-a)/2,d=(screen.height-b)/2,"location=no,menubar=no,toolbar=no,scrollbars=no,status=no,resizable=no,width="+a+",height="+b+",left="+c+",top="+d},g=function(a,b){var c,g,i,j,k;return i=b.promise,null!=(k=e.win)&&k.close(),e.win=j=h.open(a,"blogvio_popup_"+d(),f(500,496)),c=function(){return!j||j.closed?(clearInterval(g),b.reject("window closed")):void 0},g=setInterval(c,50),i.then(function(){return j.close()}),i},b.exports=g},{"../utils/guid":"wdlc5X","./../../../bower/aye/ayepromise.js":1}],w4N2lO:[function(a,b){var c,d,e,f,g,h;f=a("./detect/parse"),d=function(){var a,b,c;return c="blogvio_test_src",document.write("<script id='"+c+"'></script>"),a=document.getElementById(c),b=a.previousSibling,"STYLE"===b.nodeName&&(b=b.previousSibling),a.parentNode.removeChild(a),b},g=d(),h=f(g.src),e=h.hashKey.domain||"blogvio.com",c={proxy:"//"+e+"/sdk/proxy.html#proxy",popup:"//"+e+"/sdk/proxy.html#popup",auth:"//"+e+"/oauth/v2/auth",composition:"//"+e+"/api/v2/compositions/{id}/embed.html",widget:"//"+e+"/api/v2/widgets/{id}/embed.html",editor:"//"+e+"/api/v2/editor.html",api:"/api/v2/"},b.exports=c},{"./detect/parse":"dTYASY"}],config:[function(a,b){b.exports=a("w4N2lO")},{}],rfnAbe:[function(a,b){var c,d,e,f;e=a("./parse"),d=a("json3"),f=window,c=function(a){var b,c,g,h,i,j,k,l,m,n;if((!f.parent||f.parent!==f||f.opener)&&(k=e(a),c=k.hash,g=k.hashKey,l=k.query,m=k.queryKey,j="proxy"===c,i=g.hasOwnProperty("popup"),h=g.hasOwnProperty("oauth")||g.access_token,h||j||i))return h&&(n="o"),j&&(n="i"),i&&(n="p"),b=c?g:m,(f.opener||f.parent).postMessage(d.stringify({d:b,t:n}),"*")},c.parse=e,b.exports=c},{"./parse":"dTYASY",json3:5}],"detect/index":[function(a,b){b.exports=a("rfnAbe")},{}],"detect/parse":[function(a,b){b.exports=a("dTYASY")},{}],dTYASY:[function(a,b){var c;c=function(a){var b,d,e,f;for(e=c.options,d=e.parser[e.strictMode?"strict":"loose"].exec(a),f={},b=14;b--;)f[e.key[b]]=d[b]||"";return f[e.q.name]={},f[e.key[12]].replace(e.q.parser,function(a,b,c){return b?f[e.q.name][b]=c:void 0}),f[e.h.name]={},f[e.key[13]].replace(e.h.parser,function(a,b,c){return b?f[e.h.name][b]=c:void 0}),f},c.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","hash"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},h:{name:"hashKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},b.exports=c
},{}],"dom/root":[function(a,b){b.exports=a("IpswYn")},{}],IpswYn:[function(a,b){var c,d,e,f,g,h,i,j;g="#blogvio-root{position:absolute;top:-1000px;left:-1000px;width:0px;height:0px;visibility:hidden;z-index:-1}#blogvio-root iframe{width:0px;height:0px}iframe.blogvio-composition {border: none;width: 100%;height: 100%;}iframe.blogvio-editor {width: 490px; height: 565px; border:none;overflow:hidden}",f=a("../config"),h=a("../utils/event"),d=a("../api/index"),i=a("../auth/iframe"),j=d.queue.steps,e=a("./../../../bower/aye/ayepromise.js"),c=function(){var a;return a=document.getElementsByTagName("body")[0],a.appendChild(this.el=document.createElement("div")),this.el.id="blogvio-root",i.setRoot(this),this},c.prototype.createProxy=function(){var a,b,e;return j.init&&(b=document.createElement("iframe"),this.el.appendChild(b),a=function(){c._done=null,clearTimeout(e)},e=setTimeout(a,1e4),c._done=function(){return d.setProxy(function(a){return b.contentWindow.postMessage(a,"*")}),clearTimeout(e),j.init(),c._done=j.init=null},b.setAttribute("src",f.proxy)),this},c.connect=function(){return"function"==typeof c._done?c._done():void 0},c.style=function(){var a,b;return a=document.getElementsByTagName("head")[0],a.appendChild(b=document.createElement("style")),b.textContent=g},b.exports=c},{"../api/index":"1cWdrt","../auth/iframe":"kUaSlt","../config":"w4N2lO","../utils/event":"1DYCdS","./../../../bower/aye/ayepromise.js":1}],WiQx0x:[function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;g=a("./dom/root"),i=a("./api"),j=a("./auth"),k=a("./detect"),f=a("json3"),l=a("./utils/event"),q=a("./utils/ready"),d=a("./UI/composition"),e=a("./UI/editor"),h=a("./UI"),r=window,m=!1,p={a:i.request,e:i.response,i:g.connect,o:j.connect,u:d.connect,w:e.connect,ee:e.event,p:h.popup.receiver},o=function(a){var b,c,d;b=a.data;try{if("string"!=typeof b)return;b=f.parse(b)}catch(e){return c=e,void(0===b.indexOf("_FB_"))}try{return"function"==typeof p[d=b.t]?p[d](b,a):void 0}catch(e){return void(c=e)}},c=function(){return"function"==typeof r.BlogvioAsyncInit&&r.BlogvioAsyncInit(),l.on(r,"message",o),k(r.location.href),g.style(),h.parse()},n=function(){var a,b=this;if(!m)return a=function(){return(b.root=new g).createProxy(),m=!0},document.getElementsByTagName("body")[0]?a():q(a)},c.prototype.init=function(a,b){return n(),a&&b?(j.setAuthOptions(a,b),this):this},c.prototype.api=function(){return n(),i.apply(this,arguments)},c.prototype.auth=function(){return j.apply(this,arguments)},c.prototype.auth.status=function(){return i.getStatus.apply(this,arguments)},c.prototype.auth.token=function(){return i.accessToken.apply(this,arguments)},c.prototype.auth.disconnect=function(){return i.disconnect.apply(this,arguments)},c.prototype.JSON=f,c.prototype.Queue=i.queue,c.prototype.Aye=a("./../../bower/aye/ayepromise.js"),c.prototype.Event=l,c.prototype.GUID=a("./utils/guid"),c.prototype.pubsub=a("./../../bower/pubsub.js/src/pubsub.js"),c.prototype.require=a,c.prototype.UI=h,c.prototype.VERSION="0.3.7",c.prototype.debug={timestamp:a("./utils/timestamp")},b.exports=c},{"./../../bower/aye/ayepromise.js":1,"./../../bower/pubsub.js/src/pubsub.js":2,"./UI":"wkkzaU","./UI/composition":"vLZnBx","./UI/editor":"4teAgo","./api":"1cWdrt","./auth":"1/F0DJ","./detect":"rfnAbe","./dom/root":"IpswYn","./utils/event":"1DYCdS","./utils/guid":"wdlc5X","./utils/ready":"z441ZI","./utils/timestamp":"cV5y4E",json3:5}],index:[function(a,b){b.exports=a("WiQx0x")},{}],"utils/event":[function(a,b){b.exports=a("1DYCdS")},{}],"1DYCdS":[function(a,b){var c,d;c="addEventListener",d="removeEventListener",b.exports={on:function(a,b,d,e){return null==e&&(e=!1),a[c]?a[c](b,d,e):a.attachEvent("on"+b,d)},off:function(a,b,c,e){return null==e&&(e=!1),a[d]?a[d](b,c,e):a.detachEvent("on"+b,c)}}},{}],"utils/guid":[function(a,b){b.exports=a("wdlc5X")},{}],wdlc5X:[function(a,b){var c;c=function(){var a;return a=function(a){var b;return b=(Math.random().toString(16)+"000000000").substr(2,8),a?"-"+b.substr(0,4)+"-"+b.substr(4,4):b},a()+a(!0)+a(!0)+a()},b.exports=c},{}],"gHVNd/":[function(a,b){var c,d,e;d=a("./../../../bower/queue-async/queue.js")(1),e={},c=function(a){return e.init=a},d.defer(c),d.steps=e,b.exports=d},{"./../../../bower/queue-async/queue.js":3}],"utils/queue":[function(a,b){b.exports=a("gHVNd/")},{}],"utils/ready":[function(a,b){b.exports=a("z441ZI")},{}],z441ZI:[function(a,b){var c;c=function(a){return"complete"===document.readyState?void a():document.addEventListener("DOMContentLoaded",a)},b.exports=c},{}],"utils/timestamp":[function(a,b){b.exports=a("cV5y4E")},{}],cV5y4E:[function(a,b){var c;try{c=window.require("spine/utils/timestamp")}catch(d){c=function(){}}b.exports=c},{}],46:[function(a,b){var c;c=a("./blogvio"),window.Blogvio||(window.Blogvio=new c),b.exports=window.Blogvio},{"./blogvio":"WiQx0x"}]},{},[46]);